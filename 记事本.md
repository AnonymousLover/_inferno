
### webpack建构：
* HtmlWebpackPlugin对chuck的排序

```javascript
chunksSortMode: function (chunk1, chunk2) {
    var order  = ['manifest', 'adaptive', 'plugin', 'framework', appName];
    var order1 = order.indexOf(chunk1.names[0]);
    var order2 = order.indexOf(chunk2.names[0]);
    return order1 - order2;
}
```

### history路由SPA模式的正常访问

* connect-history-api-fallback插件 --详细代码见bin目录的spa:server.js

```javascript
const app     = express();
 ....
// 配置SPA支持history路由
const fs    = require('fs');
const files = fs.readdirSync(deployPath);
files.forEach(function (filePath) {
    if (['manifest', 'plugin', 'adaptive', 'framework'].indexOf(filePath) == -1) {
        //核心代码
        app.use(`/${filePath}`, require('connect-history-api-fallback')({verbose: !isProd}))
    }
})
// 服务静态资源
app.use(express.static(deployPath, {maxAge: config.cacheMaxAge}));
// 启动服务器监听端口
const server = app.listen(PORT, function () {
    console.log(`spa server run in port ${PORT}`)
})
```